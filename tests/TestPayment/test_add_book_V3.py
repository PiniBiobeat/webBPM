import pytest
from playwright.sync_api import Page
from infra.generic_helpers import sql_updade_status_in_order_V3


class AddBookV3:
    token = {
        "ספר_27_מסלול_מקוצר": "https://payment-v4.lupa.co/api.aspx?method=add_basket&isCustomErr=false&cloudcode=test&app_version=3.5.63.d&device_type=android&lang=he&token=oQ5ESxzJOU0mMIoZhLdDfhQRl3aUvYZYAQBvh2-nRfGPMVZ7Bb6sNspumJ30NGVuxqjJsdOWVATBc4kQoma6muiThJTYHsFwxlhniyisDpfXvrUkSdV5Fvrc01ZAWVv_K6afMTdGHV5TRPaOhvhsu2uh78TvKWV45RgOAc0JKz3rOOQ6-3YebSGb0q8hRDD97HQWPK8IZcgQjDK7x-eCgzdAddzPzLKUoGGCRbtATvATHhEbGgrh51BQGyZEj1ZMkVKt2YIZxktAKgA5KZX42hvyuqCq6lIbOg072lnzkeEKy8SXGDegovjUvEjgl-xOFyOetChixUUCaJ2d8FsczA2&event_token=5d52cd7e885d4b43aeec92e9a5f2d4e4&eventtype=SQUARE_600&format=27&cover_type=0&page_type=0&theme=white_new&pages=26&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "הגדה_פורמט_6_קלאסי_פלוס": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=121dfc6615ca48e083d4cc016036a489&eventtype=HAGGADAH&format=6&cover_type=0&page_type=0&theme=hagada_spring&pages=36&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "הגדה_פורמט_27_ריבועי_קטן": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=d6d329cfa2234fb9aeadd11618713dc8&eventtype=HAGGADAH&format=27&cover_type=0&page_type=0&theme=hagada_boho&pages=36&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "הגדה_פורמט_35_ריבועי_גדול": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=dac366f452104093aa79b4e79b82bae2&eventtype=HAGGADAH&format=35&cover_type=0&page_type=0&theme=hagada_agadah&pages=36&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "אלבום_לבדיקת_144_עמודים": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=e36d5e7f64124e09b7a985933a6830f3&eventtype=REGULAR&format=35&cover_type=0&page_type=0&theme=in_memoriam_israeli&pages=146&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_6_קלאסי_פלוס_הולנדי": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=c185523cc38b4102a92950db007d8cfc&eventtype=REGULAR&format=6&cover_type=0&page_type=5&theme=fish&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_26_פנורמי_הולנדי": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=9f884ce291c54a429860d4ecb7fa57c9&eventtype=REGULAR&format=26&cover_type=0&page_type=5&theme=green_new&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_27_ריבועי_קטן_הולנדי": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=862bd344cae647c188ac1800f8b03848&eventtype=REGULAR&format=27&cover_type=0&page_type=5&theme=black_new&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_35_ריבועי_גדול_הולנדי": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=18715ed78d0341dea475363d0138694d&eventtype=REGULAR&format=35&cover_type=0&page_type=5&theme=thailove&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_38_מיני_לופה_קשה": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=16925c19e67d469aa3a2f1aef5c36bdb&eventtype=REGULAR&format=35&cover_type=0&page_type=0&theme=dark_pink_new&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_6_קלאסי_פלוס_קשה": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=84f4ba8a390b45f6927a3033894a9a60&eventtype=REGULAR&format=6&cover_type=0&page_type=0&theme=light_blue_new&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_26_פנורמי_קשה": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=70d9d57e2aee43a2869e5f83855d0dee&eventtype=REGULAR&format=26&cover_type=0&page_type=0&theme=yassou&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_27_ריבועי_קטן_קשה": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=a21fefee1d0845c0b50812b669183002&eventtype=REGULAR&format=27&cover_type=0&page_type=0&theme=blue&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",
        "פורמט_35_ריבועי_גדול_קשה": "https://paymentsv4-api.lupa.co.il/api.aspx?method=add_basket&isCustomErr=false&cloudcode=public&app_version=3.5.51.d&device_type=android&lang=he&token=J9kO4Y050-_cRqANIiQNVFdRPw9cOZ-aJDgrL_ACYY6sgFmO0u0FagSfp1akYgB4YBRXsFe14umv8hR7ekAWRp-kVKvSKRzXf_8y3qDRr7y97W-ye7VI4b2_mPyUWhd0HclkoZzN9KFXV7aOIOlMzKxplaY_xraOujHT3YKCv-iqtn0TyYDjFobEaX_b6M2TgpWe_DTUnnxxxbJr9rwqgT70NYYa4JKkmEamkBduo9e2l-wps4T60Fc1kMe1bPxs3ia--LK44oc0bhTLkR7S4AnxMAjj6vxm5eeXs1wwB7ZqeNMaWGgWmdZriHLFZdvY7kjC0tdMNhAPkqbx1qn30A2&event_token=be2b30408f834a74a66fbb863c4e589e&eventtype=REGULAR&format=35&cover_type=0&page_type=0&theme=white_new&pages=24&quantity=1&platform=app&source_type=books&source_device=mobile&flow=v4",

    }


    def requestV3(self, page, album_name):
        token = self.token.get(album_name)
        response = page.context.request.get(token)
        assert response.ok
        assert response.status == 200
        sql_updade_status_in_order_V3()


class TestAddBookV3:
    def test_api_request(self, page):
        AddBookV3().requestV3(page, "פורמט_35_ריבועי_גדול_קשה")
